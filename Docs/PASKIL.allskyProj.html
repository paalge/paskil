
<!doctype html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><title>Python: module PASKIL.allskyProj</title>
</head><body bgcolor="#f0f0f8">

<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="heading">
<tr bgcolor="#7799ee">
<td valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial">&nbsp;<br><big><big><strong><a href="PASKIL.html"><font color="#ffffff">PASKIL</font></a>.allskyProj</strong></big></big></font></td
><td align=right valign=bottom
><font color="#ffffff" face="helvetica, arial"><a href=".">index</a><br><a href="file:/home/nialp/allsky/PASKIL/Docs/PASKIL/allskyProj.py">/home/nialp/allsky/PASKIL/Docs/PASKIL/allskyProj.py</a></font></td></tr></table>
    <p><tt>Introduction:<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;allskyProj&nbsp;module&nbsp;provides&nbsp;a&nbsp;<a href="#projection">projection</a>&nbsp;class&nbsp;which&nbsp;can&nbsp;be&nbsp;used&nbsp;to&nbsp;produce&nbsp;map&nbsp;projections&nbsp;of<br>
&nbsp;&nbsp;&nbsp;&nbsp;allsky&nbsp;images.<br>
&nbsp;<br>
&nbsp;<br>
&nbsp;<br>
Concepts:<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;projections&nbsp;are&nbsp;done&nbsp;using&nbsp;a&nbsp;curved&nbsp;atmosphere&nbsp;model&nbsp;to&nbsp;calculate&nbsp;the&nbsp;field&nbsp;of&nbsp;view&nbsp;distance<br>
&nbsp;&nbsp;&nbsp;&nbsp;on&nbsp;the&nbsp;surface&nbsp;of&nbsp;the&nbsp;Earth.&nbsp;The&nbsp;image&nbsp;is&nbsp;then&nbsp;projected&nbsp;onto&nbsp;a&nbsp;map&nbsp;using&nbsp;the&nbsp;relevent&nbsp;<a href="#projection">projection</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;the&nbsp;type&nbsp;of&nbsp;lens&nbsp;used.&nbsp;This&nbsp;map&nbsp;<a href="#projection">projection</a>&nbsp;is&nbsp;then&nbsp;used&nbsp;to&nbsp;grid&nbsp;the&nbsp;image&nbsp;data&nbsp;in&nbsp;a&nbsp;regular&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;lat/lon&nbsp;grid.&nbsp;The&nbsp;gridded&nbsp;data&nbsp;can&nbsp;then&nbsp;be&nbsp;transformed&nbsp;to&nbsp;whatever&nbsp;map&nbsp;<a href="#projection">projection</a>&nbsp;is&nbsp;desired&nbsp;(this<br>
&nbsp;&nbsp;&nbsp;&nbsp;is&nbsp;done&nbsp;by&nbsp;the&nbsp;createMapProjection&nbsp;method).&nbsp;This&nbsp;method&nbsp;returns&nbsp;a&nbsp;matplotlib.toolboxes.basemap<br>
&nbsp;&nbsp;&nbsp;&nbsp;object,&nbsp;allowing&nbsp;users&nbsp;the&nbsp;use&nbsp;of&nbsp;any&nbsp;of&nbsp;the&nbsp;basemap&nbsp;methods,&nbsp;for&nbsp;example&nbsp;drawing&nbsp;coastlines.<br>
&nbsp;<br>
&nbsp;<br>
&nbsp;<br>
Example:<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;In&nbsp;the&nbsp;following&nbsp;example&nbsp;the&nbsp;allskyImage&nbsp;object&nbsp;'im'&nbsp;is&nbsp;projected&nbsp;to&nbsp;an&nbsp;altitude&nbsp;of&nbsp;300km,&nbsp;and&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;then&nbsp;projected&nbsp;onto&nbsp;an&nbsp;equidistant&nbsp;<a href="#projection">projection</a>&nbsp;map&nbsp;of&nbsp;the&nbsp;Svalbard&nbsp;area.&nbsp;The&nbsp;coastlines&nbsp;and&nbsp;lines<br>
&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;equal&nbsp;latitude&nbsp;and&nbsp;longitude&nbsp;are&nbsp;drawn&nbsp;in&nbsp;and&nbsp;then&nbsp;the&nbsp;figure&nbsp;is&nbsp;saved&nbsp;as&nbsp;a&nbsp;png&nbsp;file.<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;import&nbsp;allskyProj<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;from&nbsp;pylab&nbsp;import&nbsp;savefig<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proj=im.projectToHeight(300000)&nbsp;#create&nbsp;a&nbsp;<a href="#projection">projection</a>&nbsp;object&nbsp;of&nbsp;the&nbsp;data&nbsp;at&nbsp;300km<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#create&nbsp;an&nbsp;azimuthal&nbsp;equidistant&nbsp;map&nbsp;<a href="#projection">projection</a>&nbsp;2000x2000km&nbsp;in&nbsp;size&nbsp;centered&nbsp;on&nbsp;78N&nbsp;10E<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;map_projection=proj.createMapProjection(<a href="#projection">projection</a>='aeqd',lat_0=78,&nbsp;lon_0=10,&nbsp;width=2000000,&nbsp;height=2000000,&nbsp;resolution='l')<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;map_projection.drawcoastlines()&nbsp;#draw&nbsp;in&nbsp;the&nbsp;coastlines<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;map_projection.drawmeridians(range(-180,180,10))&nbsp;#draw&nbsp;in&nbsp;lines&nbsp;of&nbsp;constant&nbsp;longitude&nbsp;at&nbsp;a&nbsp;resolution&nbsp;of&nbsp;10&nbsp;degrees<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;map_projection.drawparallels(range(-90,90,10))&nbsp;#draw&nbsp;in&nbsp;lines&nbsp;of&nbsp;constant&nbsp;latitude&nbsp;at&nbsp;a&nbsp;resolution&nbsp;of&nbsp;10&nbsp;degrees<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;savefig("fig1.png")&nbsp;#save&nbsp;figure&nbsp;as&nbsp;a&nbsp;png&nbsp;file</tt></p>
<p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#aa55cc">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#fffff" face="helvetica, arial"><big><strong>Modules</strong></big></font></td></tr>
    
<tr><td bgcolor="#aa55cc"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><table width="100%" summary="list"><tr><td width="25%" valign=top><a href="Image.html">Image</a><br>
<a href="ImageOps.html">ImageOps</a><br>
</td><td width="25%" valign=top><a href="matplotlib.cm.html">matplotlib.cm</a><br>
<a href="math.html">math</a><br>
</td><td width="25%" valign=top><a href="numpy.html">numpy</a><br>
</td><td width="25%" valign=top></td></tr></table></td></tr></table><p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#ee77aa">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Classes</strong></big></font></td></tr>
    
<tr><td bgcolor="#ee77aa"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><dl>
<dt><font face="helvetica, arial"><a href="PASKIL.allskyProj.html#projection">projection</a>
</font></dt></dl>
 <p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#ffc8d8">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#000000" face="helvetica, arial"><a name="projection">class <strong>projection</strong></a></font></td></tr>
    
<tr bgcolor="#ffc8d8"><td rowspan=2><tt>&nbsp;&nbsp;&nbsp;</tt></td>
<td colspan=2><tt>Holds&nbsp;image&nbsp;data&nbsp;in&nbsp;a&nbsp;format&nbsp;suitable&nbsp;for&nbsp;use&nbsp;in&nbsp;producing&nbsp;map&nbsp;projections.<br>&nbsp;</tt></td></tr>
<tr><td>&nbsp;</td>
<td width="100%">Methods defined here:<br>
<dl><dt><a name="projection-__init__"><strong>__init__</strong></a>(self, im, proj_height, grid_size, background<font color="#909090">='black'</font>)</dt></dl>

<dl><dt><a name="projection-createMapProjection"><strong>createMapProjection</strong></a>(self, grid_size<font color="#909090">=500</font>, **kwargs)</dt><dd><tt>Returns&nbsp;a&nbsp;matplotlib&nbsp;basemap&nbsp;object&nbsp;containing&nbsp;a&nbsp;plot&nbsp;of&nbsp;the&nbsp;map&nbsp;<a href="#projection">projection</a>&nbsp;described&nbsp;by&nbsp;kwargs.<br>
The&nbsp;grid_size&nbsp;option&nbsp;sets&nbsp;the&nbsp;number&nbsp;of&nbsp;grid&nbsp;squares&nbsp;that&nbsp;the&nbsp;map&nbsp;plot&nbsp;will&nbsp;be&nbsp;split&nbsp;into&nbsp;to&nbsp;<br>
interpolate&nbsp;the&nbsp;image&nbsp;data.&nbsp;A&nbsp;higher&nbsp;number&nbsp;will&nbsp;result&nbsp;in&nbsp;longer&nbsp;processing&nbsp;times&nbsp;but&nbsp;a&nbsp;less<br>
grainy&nbsp;image.<br>
&nbsp;<br>
For&nbsp;a&nbsp;list&nbsp;of&nbsp;possible&nbsp;kwargs,&nbsp;see&nbsp;the&nbsp;matplotlib.toolkits.basemap&nbsp;documentation.&nbsp;This&nbsp;also&nbsp;details&nbsp;<br>
the&nbsp;basemap&nbsp;methods&nbsp;which&nbsp;can&nbsp;be&nbsp;used&nbsp;for&nbsp;drawing&nbsp;in&nbsp;the&nbsp;coastlines,meridians&nbsp;etc&nbsp;on&nbsp;the&nbsp;map&nbsp;<a href="#projection">projection</a>:<br>
<a href="http://matplotlib.sourceforge.net/matplotlib.toolkits.basemap.basemap.html">http://matplotlib.sourceforge.net/matplotlib.toolkits.basemap.basemap.html</a></tt></dd></dl>

<dl><dt><a name="projection-default"><strong>default</strong></a>(self)</dt><dd><tt>Creates&nbsp;a&nbsp;'standard'&nbsp;map&nbsp;<a href="#projection">projection</a>&nbsp;of&nbsp;the&nbsp;image&nbsp;and&nbsp;returns&nbsp;it&nbsp;as&nbsp;a&nbsp;matplotlib&nbsp;basemap<br>
object.&nbsp;The&nbsp;'standard'&nbsp;is&nbsp;an&nbsp;azimuthal&nbsp;equidistant&nbsp;<a href="#projection">projection</a>&nbsp;centred&nbsp;on&nbsp;the&nbsp;observation<br>
site&nbsp;with&nbsp;a&nbsp;width&nbsp;and&nbsp;height&nbsp;equal&nbsp;to&nbsp;three&nbsp;times&nbsp;the&nbsp;field&nbsp;of&nbsp;view&nbsp;distance.&nbsp;The&nbsp;coastlines,<br>
meridians&nbsp;and&nbsp;parallels&nbsp;are&nbsp;drawn&nbsp;in&nbsp;automatically.</tt></dd></dl>

<dl><dt><a name="projection-overlaySuperDARN"><strong>overlaySuperDARN</strong></a>(self, SDARN_file)</dt><dd><tt>Returns&nbsp;a&nbsp;PIL&nbsp;image&nbsp;object&nbsp;containing&nbsp;a&nbsp;SuperDARN&nbsp;convection&nbsp;plot&nbsp;with&nbsp;the&nbsp;allsky&nbsp;image<br>
projected&nbsp;onto&nbsp;it.&nbsp;The&nbsp;SDARN_file&nbsp;argument&nbsp;should&nbsp;be&nbsp;the&nbsp;filename&nbsp;of&nbsp;a&nbsp;SuperDARN&nbsp;convection<br>
plot&nbsp;image&nbsp;(these&nbsp;can&nbsp;be&nbsp;downloaded&nbsp;at&nbsp;<a href="http://superdarn.jhuapl.edu/archive.html">http://superdarn.jhuapl.edu/archive.html</a>).</tt></dd></dl>

</td></tr></table></td></tr></table>
</body></html>